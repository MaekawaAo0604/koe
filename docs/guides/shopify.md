# Shopify で Koe を埋め込む

Shopify のテーマファイル（`theme.liquid`）にKoeの埋め込みコードを追加します。

---

## 手順

### 1. テーマのコード編集画面を開く

1. Shopify管理画面にログイン
2. 左メニュー →「オンラインストア」→「テーマ」
3. 現在のテーマの「...」ボタン →「コードを編集」をクリック

### 2. theme.liquid を開く

1. 左のファイル一覧から `layout` フォルダを展開
2. `theme.liquid` をクリックして開く

### 3. Koeの埋め込みコードを貼る

`</head>` タグを見つけて、その**直前**にKoeの埋め込みコードを貼り付けます。

```html
<!-- Koe: お客様の声ウィジェット -->
<script src="https://あなたのURL/widget.js" data-project="あなたのプロジェクトID" data-widget="あなたのウィジェットID"></script>
</head>
```

> **ヒント**: `Ctrl + F`（Mac: `Cmd + F`）で `</head>` を検索すると素早く見つけられます。

### 4. 保存

右上の「保存」ボタンをクリックします。

### 5. ストアで確認

ストアのページを開いて、お客様の声が表示されていれば完了です。

---

## 特定のページにだけ表示したい場合

全ページではなく特定のページにだけ表示したい場合は、`theme.liquid` ではなく対象ページのテンプレートファイルに貼ります。

1. コード編集画面で `templates` フォルダを展開
2. 対象のテンプレート（例: `page.liquid` や `product.liquid`）を開く
3. 表示したい位置にKoeの埋め込みコードを貼る
4. 保存

---

## 注意事項

### テーマの更新・変更

- テーマを変更すると、コード編集の内容は新しいテーマに引き継がれません。テーマ変更後は再度埋め込みコードを設置してください。

### 他のアプリ・テーマとの干渉

- 一部のテーマやアプリが `<head>` 内のコードを書き換える場合があります。表示がおかしい場合は、貼る位置を `</body>` の直前に変更してみてください。

### Shopify の Content Security Policy (CSP)

- Shopifyはデフォルトでは外部スクリプトを制限していませんが、カスタムCSPを設定している場合は Koe のドメインを許可リストに追加してください。

その他の問題は [トラブルシューティング](troubleshooting.md) を参照してください。
